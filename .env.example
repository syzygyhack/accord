# accord server configuration
# Copy to .env and edit: cp .env.example .env
#
# Values marked REQUIRED must be set before running.
# The server warns at startup if secrets are still default values.

# ==============================================================================
# REQUIRED — you must set these before running
# ==============================================================================

# Secret for signing JWT tokens (REQUIRED).
# Generate with: openssl rand -base64 32
JWT_SECRET=

# LiveKit API credentials (REQUIRED).
# Generate a key/secret pair and set the same values in config/livekit/config.yaml.
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=

# ==============================================================================
# SERVER IDENTITY
# ==============================================================================

# Display name shown to clients
# SERVER_NAME=My Accord Server

# Stable server identifier used in JWTs and invite links (URL-safe).
# Typically your public hostname (without scheme).
# Examples: "chat.example.com", "localhost:8080"
# SERVER_ID=chat.example.com

# MySQL root password (REQUIRED) — used for initial DB setup.
# Generate with: openssl rand -base64 32
MYSQL_ROOT_PASSWORD=

# MySQL password for the dedicated 'ergo' user (optional).
# Falls back to MYSQL_ROOT_PASSWORD if unset.
# For production, set a separate password: openssl rand -base64 32
# MYSQL_ERGO_PASSWORD=

# ==============================================================================
# NETWORKING
# ==============================================================================

# Caddy site address. Set to your domain for automatic HTTPS, or :80 for plain HTTP.
# Examples: "chat.example.com", ":80", "localhost:8080"
# SITE_ADDRESS=:80

# LiveKit WebSocket URL returned to clients.
# Set to your public/LAN address — do NOT hardcode a dev IP here.
# LIVEKIT_CLIENT_URL=wss://chat.example.com:7880

# Restrict CORS to specific origin(s). Comma-separated list.
# When unset, all cross-origin requests are rejected.
# ALLOWED_ORIGIN=https://chat.example.com,https://app.example.com

# Base URL for generated invite links (falls back to request Origin/Host if unset)
# BASE_URL=https://chat.example.com

# Restrict IRC WebSocket origins (JSON array). Defaults to localhost in docker-compose.
# In production, set this to your actual domain(s) only.
# ERGO_WEBSOCKET_ORIGINS=["https://chat.example.com"]

# Bearer token for Ergo HTTP API (REQUIRED).
# Used by accord-files; injected into Ergo config.
# Generate with: openssl rand -base64 32
ERGO_API_TOKEN=

# ==============================================================================
# FILE UPLOADS
# ==============================================================================

# Max upload size in bytes (default: 25 MB)
# MAX_FILE_SIZE=26214400

# ==============================================================================
# TUNING (defaults are sensible — only change if needed)
# ==============================================================================

# JWT lifetime in seconds (default: 3600 = 1 hour)
# JWT_EXPIRY=3600

# Ergo IRC server API (internal Docker address)
# ERGO_API=http://ergo:8089

# NOTE: If you change ERGO_API_TOKEN, restart containers so Ergo picks it up.

# Rate limits (requests per window). Defaults are reasonable for most deployments.
# RATE_LIMIT_AUTH_MAX=10
# RATE_LIMIT_AUTH_WINDOW=900000
# RATE_LIMIT_PREVIEW_MAX=30
# RATE_LIMIT_UPLOAD_MAX=20
# RATE_LIMIT_INVITE_MAX=10
# RATE_LIMIT_WINDOW=60000
